---
import Layout from '@/layouts/Layout.astro';

import HeroKeyLogo from '@/assets/hero-key-logo.webp';
import HeroKeyBackground from '@/assets/hero-key-background.webp';
import LogoVIIcon from '@/assets/logo-vi.svg';
import PlayButtonIcon from '@/assets/play-button.svg';
import LogoCutted from '@/assets/logo-cutted.svg';
---

<Layout>
	<div id="logo-mask" class="fixed top-0 w-full h-screen">
		<section>
			<picture
				id="hero-key"
				class="h-screen scale-125 block overflow-hidden fixed"
			>
				<img 
					id="hero-key-logo" 
					src={HeroKeyLogo.src}
					alt="Hero Key Logo" 
					class="absolute w-full object-cover"
				/>
				<img 
					id="hero-key-background" 
					src={HeroKeyBackground.src}
					alt="Hero Key Background" 
					class="w-full h-full object-cover"
				/>
			</picture>
		</section>
	</div>

	<div class="fixed flex flex-col items-center justify-between w-full h-screen px-20 py-16">
		<header class="flex justify-between w-full">
			<LogoVIIcon class="size-11 text-white hover:text-yellow-100 transition-colors duration-500 cursor-pointer" />
			<button
				class="flex flex-col justify-center items-center w-12 h-11 ml-4 cursor-pointer group"
				aria-label="Open menu"
			>
				<span class="block w-6 h-1 bg-white rounded-full mb-1.5 transition-all duration-300 group-hover:bg-yellow-100"></span>
				<span class="block w-6 h-1 bg-white rounded-full mb-1.5 transition-all duration-300 group-hover:bg-yellow-100"></span>
			</button>
		</header>

		<button class="absolute inset-0 w-fit h-fit m-auto cursor-pointer inline-block">
			<PlayButtonIcon 
				id="hero-play-button"
				class="text-white m-auto size-28 mt-10 backdrop-blur-3xl rounded-full hover:scale-110 transition-transform duration-500"
				onclick="window.open('https://www.youtube.com/@intervisualab', '_blank')"
			/>
		</button>

		<footer id="hero-footer" class="absolute bottom-10 m-auto">
			<LogoCutted class="text-white w-38 drop-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000]"/>
			<span class="absolute uppercase tracking-[6px] whitespace-nowrap text-center top-[52px] font-medium text-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000] left-1/2 -translate-x-1/2">
				Ver el Tr√°iler 2
			</span>
		</footer>
	</div>
</Layout>

<style>
    #logo-mask {
        background-color: white;
        mask-image: url("/landing-gta-vi/logo-stack.svg");
        mask-position: center 25%;
        mask-repeat: no-repeat;
        mask-size: clamp(5000vh, 3500%, 0vh);
    }

    @media (max-width: 768px) {
				#hero-key-logo {
					scale: 1.7;
					top: 10em;
				}
		}
    @media (max-width: 480px) {
				#hero-key {
						scale: 1.2;
				}
				#hero-key-logo {
					scale: 1.9;
					top: 12em;
				}
		}
</style>

<script>
	import { gsap } from 'gsap';
	import { ScrollTrigger } from 'gsap/ScrollTrigger';

	gsap.registerPlugin(ScrollTrigger);	

	const tl = gsap.timeline({
		ease: 'power2.inOut',
		scrollTrigger: {
			scrub: 1,
		}
	});

	tl
		.to('#hero-key', { duration: 1, scale: 1 })
		.to('#hero-key-logo', { opacity: 0 }, "<")
		.to('#hero-footer', { opacity: 0 }, "<")
		.to('#hero-play-button', { opacity: 0 }, "<")
		.to('#logo-mask', { maskSize: 'clamp(20vh, 25%, 30vh' }, 0.15)
		.to('#hero-key', { opacity: 0, duration: 1 }, "<")

</script>
